
## 基本GDB命令

### 1. 帮助命令

**命令**：`help`  
**格式**：`help [COMMAND]`  
**使用示例**：`help` 或 `help info`

**说明**：显示GDB的帮助信息。

- 直接输入`help`将列出所有可用的命令。
- 使用`help COMMAND`可以查看某个特定命令的帮助信息。

**示例**：

```bash
(gdb) help info
# 输出关于 info 命令的帮助信息。
```

### 2. 继续运行

**命令**：`continue`  
**格式**：`c`  
**使用示例**：`c`

**说明**：让程序从当前暂停位置继续运行，直到遇到下一个断点或程序结束。

**示例**：

```bash
(gdb) c
# 继续运行当前暂停的程序。
```

### 3. 退出GDB

**命令**：`quit`  
**格式**：`q`  
**使用示例**：`q`

**说明**：退出GDB调试器。

**示例**：

```bash
(gdb) q
# 退出GDB
```

### 4. 单步执行

**命令**：`stepi`  
**格式**：`si [N]`  
**使用示例**：`si 10`

**说明**：让程序单步执行N条指令后暂停执行。如果没有给出N，默认为1。

- `si`表示单步执行一条机器指令（汇编级）。
- `step`用于单步执行一条源代码级指令。

**示例**：

```bash
(gdb) si 10
# 让程序单步执行10条指令后暂停。
```

### 5. 打印程序状态

**命令**：`info`  
**格式**：`info SUBCMD`  
**使用示例**：`info r`、`info w`

**说明**：`info`命令可以显示程序的各种状态信息，例如寄存器、断点、监视点等。

- **查看寄存器状态**：`info registers` 或 `info r`

  ```bash
  (gdb) info r
  # 打印所有寄存器的当前值。
  ```

- **查看监视点信息**：`info watchpoints` 或 `info w`

  ```bash
  (gdb) info w
  # 显示当前所有设置的监视点信息。
  ```

### 6. 扫描内存

**命令**：`x`  
**格式**：`x N EXPR`  
**使用示例**：`x 10 $esp`

**说明**：查看内存内容。

- `N`表示查看的单元数，`EXPR`表示要查看的起始内存地址。
- `x`命令还可以指定格式和大小，比如`x/10xw`表示查看10个四字节的单元，以十六进制显示。

**示例**：

```bash
(gdb) x/10xw $esp
# 从栈指针 `$esp` 开始，以十六进制格式显示连续10个四字节的内存内容。
```

### 7. 表达式求值

**命令**：`print`  
**格式**：`p EXPR`  
**使用示例**：`p $eax + 1`

**说明**：计算并打印表达式的值。

- `EXPR`支持C风格的表达式、变量、寄存器等。
- 可以用于快速查看变量或寄存器的值。

**示例**：

```bash
(gdb) p $eax + 1
# 计算寄存器 $eax 的值加 1，并输出结果。
```

### 8. 设置监视点

**命令**：`watch`  
**格式**：`w EXPR`  
**使用示例**：`w *0x2000`

**说明**：当表达式 `EXPR` 的值发生变化时，暂停程序执行。监视点通常用于检查某个内存地址或变量是否发生了变化。

**示例**：

```bash
(gdb) w *0x2000
# 监视内存地址 0x2000，当该地址的内容发生变化时暂停程序。
```

### 9. 删除监视点

**命令**：`delete`  
**格式**：`d N`  
**使用示例**：`d 2`

**说明**：删除指定的监视点或断点。

- `N`表示监视点或断点的序号。
- 可以使用`info breakpoints`或`info watchpoints`查看所有断点和监视点的编号。

**示例**：

```bash
(gdb) d 2
# 删除编号为2的监视点或断点。
```

### 10. 设置断点

**命令**：`break`  
**格式**：`b LOCATION`  
**使用示例**：`b main`、`b 42`、`b file.c:10`

**说明**：设置断点，程序在执行到断点位置时会自动暂停。

- `LOCATION`可以是函数名、行号或文件名和行号的组合。

**示例**：

```bash
(gdb) b main
# 在函数 `main` 入口处设置断点。

(gdb) b 42
# 在当前文件的第 42 行设置断点。

(gdb) b file.c:10
# 在文件 `file.c` 的第 10 行设置断点。
```

### 11. 条件断点

**命令**：`condition`  
**格式**：`condition N EXPR`  
**使用示例**：`condition 1 x > 5`

**说明**：为断点设置条件，只有当条件满足时断点才会触发。

- `N`是断点的编号，`EXPR`是条件表达式。

**示例**：

```bash
(gdb) b main
(gdb) condition 1 x > 5
# 在 `main` 函数设置断点，仅当变量 `x` 的值大于 5 时断点触发。
```

### 12. 查看调用栈

**命令**：`backtrace`  
**格式**：`bt` 或 `backtrace N`  
**使用示例**：`bt`、`bt 5`

**说明**：查看当前的函数调用栈，帮助分析程序执行到当前位置的调用路径。

- `N` 表示显示调用栈的深度。

**示例**：

```bash
(gdb) bt
# 打印完整的调用栈。

(gdb) bt 5
# 打印前5层的调用栈。
```

### 13. 切换堆栈帧

**命令**：`frame`  
**格式**：`frame N`  
**使用示例**：`frame 2`

**说明**：切换到指定的堆栈帧，可以查看或修改对应栈帧中的变量。

- `N` 表示栈帧编号（通过`bt`查看）。

**示例**：

```bash
(gdb) frame 2
# 切换到调用栈的第 2 层帧。
```

### 14. 查看局部变量

**命令**：`info locals`  
**格式**：`info locals`  
**使用示例**：`info locals`

**说明**：打印当前栈帧中的所有局部变量及其值。

**示例**：

```bash
(gdb) info locals
# 显示当前函数中所有局部变量的值。
```

### 15. 修改变量值

**命令**：`set`  
**格式**：`set VARIABLE = VALUE`  
**使用示例**：`set x = 10`

**说明**：修改程序中变量的值，用于在调试时模拟不同的运行情况。

**示例**：

```bash
(gdb) set x = 10
# 将变量 x 的值设置为 10。
```

这些GDB命令可以帮助我们在调试过程中方便地控制程序执行、查看变量和内存状态、设置和删除断点、条件断点、查看调用栈、修改变量值等。这些命令适用于从基本到复杂的各种调试需求，在调试和理解程序执行过程时非常有用。
